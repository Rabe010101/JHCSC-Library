<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Books Catalog</title>
  <link rel="stylesheet" href="Books.css">
</head>
<body>
  <nav>
    <div class="logo-title">
      <img src="images/School_logo.png" alt="logo" class="logo">
      <span class="site-title">JHCSC</span>
    </div>
    <ul>
      <li><a href="Dashboard.php">Dashboard</a></li>
      <li><a href="Account.html">Account</a></li>
    </ul>
  </nav>

  <h1 class="page-title">Book Management</h1>

  <div class="filters">
    <input type="text" id="searchBar" class="search-bar" placeholder="Search books...">

    <select class="category-dropdown" id="categoryFilter">
      <option value="">All Categories</option>
      </select>

    <input type="number" id="yearFilter" class="year-dropdown" placeholder="Year" min="1900" max="2100">

    <button class="btn-add" id="openModal">Add</button>
  </div>

  <div class="table-container">
    <table id="booksTable">
      <thead>
        <tr>
          <th>Cover</th>
          <th>Title</th>
          <th>Author</th>
          <th>Publisher</th>
          <th>Category</th>
          <th>Year</th>
          <th>Copies</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="booksTableBody">
        </tbody>
    </table>
  </div>
  
  <div id="bookModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <h2 id="modalTitle">Add New Book</h2>
      <form id="bookForm">
        <input type="hidden" id="bookId" name="bookId">

        <label for="coverUrl">Book Cover URL:</label>
        <input type="url" id="coverUrl" name="coverUrl" placeholder="https://example.com/cover.jpg" required>

        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>

        <label for="author">Author:</label>
        <input type="text" id="author" name="author" required>

        <label for="publisher">Publisher:</label>
        <input type="text" id="publisher" name="publisher" required>

        <label for="category">Category:</label>
        <select id="category" name="category_id" required></select>
        
        <label for="year">Year:</label>
        <input type="number" id="year" name="year" min="1900" max="2100" required>
        
        <label for="copies">Copies:</label>
        <input type="number" id="copies" name="copies" min="1" required>
        
        <button type="submit" class="btn-add" id="submitBtn">Add Book</button>
      </form>
    </div>
  </div>

  <div id="addCategoryModal" class="modal">
    <div class="modal-content">
        <span class="close" id="closeCategoryModal">&times;</span>
        <h2>Add New Category</h2>
        <form id="addCategoryForm">
            <label for="newCategoryName">Category Name:</label>
            <input type="text" id="newCategoryName" required>
            <button type="submit" class="btn-add">Save Category</button>
        </form>
    </div>
  </div>
  
  <div id="removeCategoryModal" class="modal">
    <div class="modal-content">
        <span class="close" id="closeRemoveCategoryModal">&times;</span>
        <h2>Remove Category</h2>
        <p style="font-size: 14px; color: #666; margin-bottom: 15px;">You can only delete categories that are not currently in use.</p>
        <form id="removeCategoryForm">
            <label for="categoryToDelete">Select Category to Remove:</label>
            <select id="categoryToDelete" name="categoryId" required>
                </select>
            <button type="submit" class="btn-delete" style="width: 100%; margin-top: 15px;">Delete Category</button>
        </form>
    </div>
  </div>

  <div id="deleteModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeDeleteModal">&times;</span>
      <p id="deleteText"></p>
      <div style="display:flex; justify-content:space-between; margin-top:15px;">
        <button class="btn-delete" id="confirmDeleteBtn">Delete</button>
        <button class="btn-edit" id="cancelDeleteBtn">Cancel</button>
      </div>
    </div>
  </div>
  
  <script src="BooksManagement.js"></script>
</body>
</html>